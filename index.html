<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>ğŸ½ ë©”ë‰´ ì¶”ì²œí•˜ê¸”</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg1:#f6f8ff; --card:#ffffff; --accent:#6a5af9; --muted:#7b7b8a;
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, "Noto Sans KR", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    body{
      background:linear-gradient(180deg,var(--bg1),#fff);
      display:flex;align-items:center;justify-content:center;padding:24px;
    }

    .app{
      width:100%; max-width:920px; background:var(--card); border-radius:18px;
      padding:20px; box-shadow:0 10px 30px rgba(30,30,50,0.08);
    }

    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    h1{font-size:20px;margin:0;color:#222}
    .subtitle{color:var(--muted);font-size:13px}

    .controls{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px}
    .btn{
      padding:10px 14px;border-radius:10px;border:none;background:var(--accent);
      color:white;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(106,90,249,0.16);
    }
    .btn.secondary{background:#f0f2ff;color:var(--accent);box-shadow:none;border:1px solid rgba(106,90,249,0.08)}
    .pillgroup{display:flex;gap:8px;flex-wrap:wrap}

    .step{
      background:#fbfbff;padding:12px;border-radius:12px;border:1px solid rgba(0,0,0,0.03);
      min-width:200px;
    }
    .step h3{margin:0 0 8px 0;font-size:13px;color:var(--muted)}
    .step .options{display:flex;flex-wrap:wrap;gap:8px}
    .choice{
      padding:8px 12px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);cursor:pointer;background:white;
      font-weight:600;color:#333;font-size:14px;
    }
    .choice.active{background:var(--accent);color:white;box-shadow:0 6px 14px rgba(106,90,249,0.12);}

    main{margin-top:18px}
    .result-head{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .result-head .info{color:var(--muted);font-size:13px}
    .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-top:12px}

    .card{
      background:linear-gradient(180deg,#ffffff,#fbfbff);
      border-radius:12px;padding:10px;display:flex;gap:10px;align-items:center;border:1px solid rgba(0,0,0,0.03);
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .card:hover{transform:translateY(-6px);box-shadow:0 14px 40px rgba(30,30,50,0.08)}
    .thumb{width:72px;height:72px;border-radius:10px;overflow:hidden;flex:0 0 72px;background:#eee}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .meta{flex:1}
    .meta .title{font-weight:700;color:#222}
    .meta .sub{color:var(--muted);font-size:13px;margin-top:6px}

    .actions{display:flex;gap:8px;align-items:center;margin-top:12px}
    .small{padding:8px 10px;border-radius:8px;border:none;background:#f3f4f8;color:#333;cursor:pointer;font-weight:600}
    pre{white-space:pre-wrap;word-break:break-word;background:#f7f8fb;padding:12px;border-radius:8px;color:#333;font-size:13px}

    footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
    @media (max-width:640px){
      .controls{flex-direction:column}
      .step{min-width:100%}
    }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="ë©”ë‰´ ì¶”ì²œê¸°">
    <header>
      <div>
        <h1>ğŸ½ ë©”ë‰´ ì¶”ì²œê¸° ì•„ì¹¨/ì ì‹¬/ì €ë… Â· í•œ/ì–‘/ì¤‘ Â·</h1>
        <div class="subtitle">ì›í•˜ëŠ” ì‹ì‚¬ì™€, ë¨¹ê³ í”ˆê±°, ë§¤ìš´ ì •ë„ë¥¼ ì„ íƒí•˜ë©´ ì—¬ëŸ¬ ë©”ë‰´ì™€ ì‚¬ì§„ì„ ë³´ì—¬ì¤ë‹ˆë‹¤!</div>
      </div>
      <div class="pillgroup">
        <button class="btn" id="btn-random">ë¬´ì‘ìœ„ ìƒˆ ì¶”ì²œ</button>
        <button class="btn secondary" id="btn-reset">ì²˜ìŒìœ¼ë¡œ</button>
      </div>
    </header>

    <div class="controls" aria-hidden="false">
      <div class="step" id="step-1">
        <h3>1. ì•„ì¹¨ / ì ì‹¬ / ì €ë…</h3>
        <div class="options" id="opt-time"></div>
      </div>
      <div class="step" id="step-2">
        <h3>2. í•œì‹ / ì–‘ì‹ / ì¤‘ì‹</h3>
        <div class="options" id="opt-style"></div>
      </div>
      <div class="step" id="step-3">
        <h3>3. ë§¤ìš´ / ìˆœí•œ</h3>
        <div class="options" id="opt-spicy"></div>
      </div>
    </div>

    <main>
      <div class="result-head">
        <div class="info" id="selected-info">ì„ íƒ: â€”</div>
        <div class="actions">
          <button id="btn-copy" class="small">ë¦¬ìŠ¤íŠ¸ ë³µì‚¬</button>
          <button id="btn-export" class="small">ì•ˆë„ë¥¼ ë¨¹ë°©í•˜ê¸°</button>
          <button id="btn-showall" class="small">ëª¨ë‘ ë³´ê¸°</button>
        </div>
      </div>

      <div class="cards" id="cards"></div>

      <div id="debug" style="display:none"><pre id="debugJSON"></pre></div>
    </main>

    <footer>ì´ë¯¸ì§€ëŠ” ë¡œì»¬ `images/` í´ë”ì˜ íŒŒì¼ëª…ê³¼ ì—°ê²°ë©ë‹ˆë‹¤. ë¡œì»¬ ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ ëŒ€ì²´ ì´ë¯¸ì§€ê°€ ì‚¬ìš©ë©ë‹ˆë‹¤.</footer>
  </div>

  <script>
/*
  ì‚¬ìš©ë²• ìš”ì•½:
  - í”„ë¡œì íŠ¸ í´ë”ì— images/ í´ë”ë¥¼ ë§Œë“¤ê³ , ì•„ë˜ MENU_IMAGESì— ëª…ì‹œëœ íŒŒì¼ëª…ì„ ë„£ì–´ì£¼ì„¸ìš”.
  - ì˜ˆ: images/kimchi-fried-rice.jpg
  - ë¡œì»¬ ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ picsum ëŒ€ì²´ ì´ë¯¸ì§€ê°€ ë‚˜ì˜µë‹ˆë‹¤ (ì•ˆì •ì ).
  - í•„ìš”í•˜ë©´ MENU_POOL/ MENU_IMAGESë¥¼ í¸ì§‘í•´ ë©”ë‰´/ì´ë¯¸ì§€ ì¶”ê°€ ê°€ëŠ¥.
*/

/* ---------- 1) ì§ˆë¬¸ ì˜µì…˜ ---------- */
const TIMES = ["ì•„ì¹¨","ì ì‹¬","ì €ë…"];
const STYLES = ["í•œì‹","ì–‘ì‹","ì¤‘ì‹"];
const SPICIES = ["ë§¤ìš´ê±°","ìˆœí•œê±°"];

/* ---------- 2) ë©”ë‰´ í’€ (18ê°œ ì¹´í…Œê³ ë¦¬: ì•„ì¹¨/ì ì‹¬/ì €ë… Ã— í•œ/ì–‘/ì¤‘ Ã— ë§¤/ìˆœ) ----------
   ê° ì¹´í…Œê³ ë¦¬ì— ì—¬ëŸ¬ ë©”ë‰´(ì´ë¦„) ë°°ì—´ì„ ë„£ìŒ â€” ì‚¬ìš©ìê°€ ì„ íƒí•˜ë©´ ì´ ëª©ë¡ì„ ê¸°ì¤€ìœ¼ë¡œ ëœë¤/ì „ì²´ ì¶œë ¥.
   (ì›í•˜ë©´ ì´ê±¸ ë” ëŠ˜ë ¤ì„œ 10ê°œ ì´ìƒ í•­ëª©ìœ¼ë¡œ í™•ì¥í•˜ì„¸ìš”)
*/
const MENU_POOL = {
  "ì•„ì¹¨-í•œì‹-ë§¤ì›€": ["ê¹€ì¹˜ë³¶ìŒë°¥","ê³ ì¶”ì¥ë¹„ë¹”ë°¥","ì–¼í° ë¶ì—‡êµ­","ë¶€ì¶”ì „","ë§¤ìš´ ì–´ë¬µíƒ•","ë§¤ì½¤ ìˆœë‘ë¶€"],
  "ì•„ì¹¨-í•œì‹-ìˆœí•¨": ["ì•¼ì±„ì£½","ë‹¬ê±€ì°œ","ë‘ë¶€ ìƒëŸ¬ë“œ","ë¯¸ì—­êµ­","ì „ë³µì£½","ì•¼ì±„ë¹„ë¹”ë°¥(ìˆœ)"],
  "ì•„ì¹¨-ì–‘ì‹-ë§¤ì›€": ["ìŠ¤íŒŒì´ì‹œ ì˜¤ë¯ˆë ›","í• ë¼í”¼ë‡¨ í† ìŠ¤íŠ¸","í•«ì¹˜í‚¨ ìƒŒë“œ","ì¹ ë¦¬ ì—°ì–´ë³¼","í•«ì†ŒìŠ¤ ìŠ¤í¬ë¨ë¸”"],
  "ì•„ì¹¨-ì–‘ì‹-ìˆœí•¨": ["ê·¸ë¦­ìš”ê±°íŠ¸ë³¼","ì•„ë³´ì¹´ë„ í† ìŠ¤íŠ¸","í”„ë Œì¹˜í† ìŠ¤íŠ¸","ì˜¤íŠ¸ë°€+ê³¼ì¼","ì—ê·¸ë² ë„¤ë”•íŠ¸"],
  "ì•„ì¹¨-ì¤‘ì‹-ë§¤ì›€": ["íƒ„íƒ„ë©´(ë¼ì´íŠ¸)","ë§ˆíŒŒë³¶ìŒë°¥(ì†ŒëŸ‰)","ë§¤ìš´ ì™„íƒ•","ê³ ì¶”ê¸°ë¦„ ê³„ë€ë°¥"],
  "ì•„ì¹¨-ì¤‘ì‹-ìˆœí•¨": ["ê³„ë€ë³¶ìŒë°¥","ì™„ìíƒ•","ì°ë¹µ+ì°¨","ì¤‘ì‹ì•¼ì±„ì£½"],

  "ì ì‹¬-í•œì‹-ë§¤ì›€": ["ì œìœ¡ë³¶ìŒ","ë‹­ë³¶ìŒíƒ•","ë¶€ëŒ€ì°Œê°œ","ì­ˆê¾¸ë¯¸ë³¶ìŒ","ë‚™ì§€ë³¶ìŒ","ë§¤ìš´ ì˜¤ì‚¼ë¶ˆê³ ê¸°"],
  "ì ì‹¬-í•œì‹-ìˆœí•¨": ["ëœì¥ì°Œê°œ","ê°ˆë¹„íƒ•","ì½©ë‚˜ë¬¼êµ­ë°¥","ë¹„ë¹”ë°¥","ìˆœë‘ë¶€ì°Œê°œ","ì‚¼ê³„íƒ•"],
  "ì ì‹¬-ì–‘ì‹-ë§¤ì›€": ["ì•„ë¼ë¹„ì•„ë”° íŒŒìŠ¤íƒ€","ìŠ¤íŒŒì´ì‹œ í”¼ì","ì¹ ë¦¬ë²„ê±°","ì¹ ë¦¬ ë¦¬ì¡°ë˜","ìŠ¤íŒŒì´ì‹œ íƒ€ì½”"],
  "ì ì‹¬-ì–‘ì‹-ìˆœí•¨": ["ê¹Œë¥´ë³´ë‚˜ë¼","ë´‰ê³¨ë ˆ","ë¦¬ì†Œí† ","í´ëŸ½ìƒŒë“œ","ì¹˜ì¦ˆì˜¤ë¯ˆë ›"],
  "ì ì‹¬-ì¤‘ì‹-ë§¤ì›€": ["ì§¬ë½•","ë§ˆë¼íƒ•","ë§ˆíŒŒë‘ë¶€ë®ë°¥","ê¹í’ê¸°ë®ë°¥","ì‚¬ì²œì‹ ë³¶ìŒë°¥"],
  "ì ì‹¬-ì¤‘ì‹-ìˆœí•¨": ["ì§œì¥ë©´","íƒ•ìˆ˜ìœ¡","ìƒˆìš°ë³¶ìŒë°¥","ìš¸ë©´","ì–‘ì£¼ë³¶ìŒë°¥"],

  "ì €ë…-í•œì‹-ë§¤ì›€": ["ë§¤ìš´ê°ˆë¹„ì°œ","ë‚™ì§€ë³¶ìŒ","ë§¤ìš´ì°œë‹­","ë§¤ìš´ê°ìíƒ•","ë§¤ìš´ ë‹­ë°œ"],
  "ì €ë…-í•œì‹-ìˆœí•¨": ["ì‚¼ê³„íƒ•","ì„¤ë íƒ•","ë³´ìŒˆ","ê°ˆë¹„ì°œ(ìˆœ)","í•´ë¬¼íƒ•"],
  "ì €ë…-ì–‘ì‹-ë§¤ì›€": ["í•«ìœ™","ìŠ¤íŒŒì´ì‹œ ë¼ìëƒ","ë§¤ìš´ íŒŒìŠ¤íƒ€","íƒ€ì½” í”Œë˜í„°","í•«ì¹˜í‚¨ í”¼ì"],
  "ì €ë…-ì–‘ì‹-ìˆœí•¨": ["ìŠ¤í…Œì´í¬","ë¼ìëƒ","í¬ë¦¼íŒŒìŠ¤íƒ€","ë¦¬ì½”íƒ€ìƒëŸ¬ë“œ","ì—°ì–´ìŠ¤í…Œì´í¬"],
  "ì €ë…-ì¤‘ì‹-ë§¤ì›€": ["ë§ˆë¼ìƒ¹ê¶ˆ","ë§ˆë¼íƒ•","ì‚¬ì²œì‹ ì§¬ë½•","ë§ˆë¼ë¡±ìƒ¤","ë§¤ìš´ ê¹í’ê¸°"],
  "ì €ë…-ì¤‘ì‹-ìˆœí•¨": ["ì–‘ì¥í”¼","íŒ”ë³´ì±„","ë™íŒŒìœ¡","ë©˜ë³´ìƒ¤","ê´‘ë™ì‹ ì°œìš”ë¦¬"]
};

/* ---------- 3) ë©”ë‰´ëª… -> ë¡œì»¬ ì´ë¯¸ì§€ íŒŒì¼ ë§¤í•‘ ----------
   ì‚¬ìš©ìê°€ "ì •í™•í•œ ìŒì‹ ì´ë¯¸ì§€"ë¥¼ ì›í•œë‹¤ê³  í•´ì„œ, ì—¬ê¸°ì—ì„œ ê° ë©”ë‰´ëª…ì— ëŒ€ì‘í•˜ëŠ” íŒŒì¼ëª…(ë¡œì»¬)ì„ ë§¤í•‘í–ˆìŠµë‹ˆë‹¤.
   íŒŒì¼ëª…ì€ images/ í´ë” ì•„ë˜ì— ë„£ì–´ì£¼ì„¸ìš” (ì˜ˆ: images/kimchi-fried-rice.jpg).
   ë§Œì•½ íŒŒì¼ì´ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ picsum ëŒ€ì²´ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
*/
const MENU_IMAGES = {
  // ì•„ì¹¨-í•œì‹
  "ê¹€ì¹˜ë³¶ìŒë°¥":"kimchi-fried-rice.jpg",
  "ê³ ì¶”ì¥ë¹„ë¹”ë°¥":"gochujang-bibimbap.jpg",
  "ì–¼í° ë¶ì—‡êµ­":"spicy-dried-pollack-soup.jpg",
  "ë¶€ì¶”ì „":"buchujeon.jpg",
  "ë§¤ìš´ ì–´ë¬µíƒ•":"spicy-fishcake-soup.jpg",
  "ë§¤ì½¤ ìˆœë‘ë¶€":"spicy-sundubu.jpg",
  "ì•¼ì±„ì£½":"vegetable-porridge.jpg",
  "ë‹¬ê±€ì°œ":"steamed-egg.jpg",
  "ë‘ë¶€ ìƒëŸ¬ë“œ":"tofu-salad.jpg",
  "ë¯¸ì—­êµ­":"seaweed-soup.jpg",
  "ì „ë³µì£½":"abalone-porridge.jpg",
  "ì•¼ì±„ë¹„ë¹”ë°¥(ìˆœ)":"vegetable-bibimbap.jpg",

  // ì•„ì¹¨-ì–‘ì‹
  "ìŠ¤íŒŒì´ì‹œ ì˜¤ë¯ˆë ›":"spicy-omelette.jpg",
  "í• ë¼í”¼ë‡¨ í† ìŠ¤íŠ¸":"jalapeno-toast.jpg",
  "í•«ì¹˜í‚¨ ìƒŒë“œ":"hot-chicken-sandwich.jpg",
  "ì¹ ë¦¬ ì—°ì–´ë³¼":"chili-salmon-bowl.jpg",
  "í•«ì†ŒìŠ¤ ìŠ¤í¬ë¨ë¸”":"hot-scrambled-egg.jpg",
  "ê·¸ë¦­ìš”ê±°íŠ¸ë³¼":"greek-yogurt-bowl.jpg",
  "ì•„ë³´ì¹´ë„ í† ìŠ¤íŠ¸":"avocado-toast.jpg",
  "í”„ë Œì¹˜í† ìŠ¤íŠ¸":"french-toast.jpg",
  "ì˜¤íŠ¸ë°€+ê³¼ì¼":"oatmeal-fruit.jpg",
  "ì—ê·¸ë² ë„¤ë”•íŠ¸":"eggs-benedict.jpg",

  // ì•„ì¹¨-ì¤‘ì‹
  "íƒ„íƒ„ë©´(ë¼ì´íŠ¸)":"tantanmen.jpg",
  "ë§ˆíŒŒë³¶ìŒë°¥(ì†ŒëŸ‰)":"mapo-fried-rice.jpg",
  "ë§¤ìš´ ì™„íƒ•":"spicy-wonton.jpg",
  "ê³ ì¶”ê¸°ë¦„ ê³„ë€ë°¥":"chili-oil-egg-rice.jpg",
  "ê³„ë€ë³¶ìŒë°¥":"egg-fried-rice.jpg",
  "ì™„ìíƒ•":"meatball-soup.jpg",
  "ì°ë¹µ+ì°¨":"steamed-bread.jpg",
  "ì¤‘ì‹ì•¼ì±„ì£½":"chinese-style-porridge.jpg",

  // ì ì‹¬-í•œì‹
  "ì œìœ¡ë³¶ìŒ":"stirfried-pork.jpg",
  "ë‹­ë³¶ìŒíƒ•":"spicy-chicken-stew.jpg",
  "ë¶€ëŒ€ì°Œê°œ":"budae-jjigae.jpg",
  "ì­ˆê¾¸ë¯¸ë³¶ìŒ":"stirfried-webfoot-octopus.jpg",
  "ë‚™ì§€ë³¶ìŒ":"stirfried-octopus.jpg",
  "ë§¤ìš´ ì˜¤ì‚¼ë¶ˆê³ ê¸°":"spicy-squid-pork.jpg",
  "ëœì¥ì°Œê°œ":"doenjang-jjigae.jpg",
  "ê°ˆë¹„íƒ•":"galbitang.jpg",
  "ì½©ë‚˜ë¬¼êµ­ë°¥":"bean-sprout-soup-rice.jpg",
  "ë¹„ë¹”ë°¥":"bibimbap.jpg",
  "ìˆœë‘ë¶€ì°Œê°œ":"sundubu-jjigae.jpg",
  "ì‚¼ê³„íƒ•":"samgyetang.jpg",

  // ì ì‹¬-ì–‘ì‹
  "ì•„ë¼ë¹„ì•„ë”° íŒŒìŠ¤íƒ€":"arrabbiata-pasta.jpg",
  "ìŠ¤íŒŒì´ì‹œ í”¼ì":"spicy-pizza.jpg",
  "ì¹ ë¦¬ë²„ê±°":"chili-burger.jpg",
  "ì¹ ë¦¬ ë¦¬ì¡°ë˜":"chili-risotto.jpg",
  "ìŠ¤íŒŒì´ì‹œ íƒ€ì½”":"spicy-taco.jpg",
  "ê¹Œë¥´ë³´ë‚˜ë¼":"carbonara.jpg",
  "ë´‰ê³¨ë ˆ":"vongole.jpg",
  "ë¦¬ì†Œí† ":"risotto.jpg",
  "í´ëŸ½ìƒŒë“œ":"club-sandwich.jpg",
  "ì¹˜ì¦ˆì˜¤ë¯ˆë ›":"cheese-omelet.jpg",

  // ì ì‹¬-ì¤‘ì‹
  "ì§¬ë½•":"jjambbong.jpg",
  "ë§ˆë¼íƒ•":"mala-tang.jpg",
  "ë§ˆíŒŒë‘ë¶€ë®ë°¥":"mapo-rice.jpg",
  "ê¹í’ê¸°ë®ë°¥":"kanpunggi-rice.jpg",
  "ì‚¬ì²œì‹ ë³¶ìŒë°¥":"sichuan-fried-rice.jpg",
  "ì§œì¥ë©´":"jajangmyeon.jpg",
  "íƒ•ìˆ˜ìœ¡":"tangsuyuk.jpg",
  "ìƒˆìš°ë³¶ìŒë°¥":"shrimp-fried-rice.jpg",
  "ìš¸ë©´":"ulamyeon.jpg",
  "ì–‘ì£¼ë³¶ìŒë°¥":"yangju-fried-rice.jpg",

  // ì €ë…-í•œì‹
  "ë§¤ìš´ê°ˆë¹„ì°œ":"spicy-braised-ribs.jpg",
  "ë§¤ìš´ì°œë‹­":"spicy-jjimdak.jpg",
  "ë§¤ìš´ê°ìíƒ•":"spicy-pork-bone-soup.jpg",
  "ë§¤ìš´ ë‹­ë°œ":"spicy-chicken-feet.jpg",
  "ì‚¼ê³„íƒ•":"samgyetang-dinner.jpg",
  "ì„¤ë íƒ•":"seolleongtang.jpg",
  "ë³´ìŒˆ":"bossam.jpg",
  "ê°ˆë¹„ì°œ(ìˆœ)":"braised-ribs.jpg",
  "í•´ë¬¼íƒ•":"seafood-stew.jpg",

  // ì €ë…-ì–‘ì‹
  "í•«ìœ™":"hot-wings.jpg",
  "ìŠ¤íŒŒì´ì‹œ ë¼ìëƒ":"spicy-lazagna.jpg",
  "íƒ€ì½” í”Œë˜í„°":"taco-platter.jpg",
  "í•«ì¹˜í‚¨ í”¼ì":"hot-chicken-pizza.jpg",
  "ìŠ¤í…Œì´í¬":"steak.jpg",
  "ë¼ìëƒ":"lazagna.jpg",
  "í¬ë¦¼íŒŒìŠ¤íƒ€":"cream-pasta.jpg",
  "ë¦¬ì½”íƒ€ìƒëŸ¬ë“œ":"ricotta-salad.jpg",
  "ì—°ì–´ìŠ¤í…Œì´í¬":"salmon-steak.jpg",

  // ì €ë…-ì¤‘ì‹
  "ë§ˆë¼ìƒ¹ê¶ˆ":"mala-xiangguo.jpg",
  "ë§ˆë¼ë¡±ìƒ¤":"mala-lobster.jpg",
  "ì‚¬ì²œì‹ ì§¬ë½•":"sichuan-jjambbong.jpg",
  "ë§ˆë¼íƒ•":"mala-tang-dinner.jpg",
  "ì–‘ì¥í”¼":"yangjangpi.jpg",
  "íŒ”ë³´ì±„":"palbochae.jpg",
  "ë™íŒŒìœ¡":"dongpo-pork.jpg",
  "ë©˜ë³´ìƒ¤":"menbosha.jpg",
  "ê´‘ë™ì‹ ì°œìš”ë¦¬":"cantonese-steamed.jpg"
};

/* ---------- 4) ìœ í‹¸ ---------------------------------- */
function el(id){return document.getElementById(id)}
function setActiveOption(containerId, value){
  const container = el(containerId);
  Array.from(container.children).forEach(btn=>btn.classList.toggle('active', btn.dataset.value === value));
}

/* ì´ë¯¸ì§€ ê²½ë¡œ(ë¡œì»¬) ìƒì„±: if exists -> use local, else -> fallback to picsum */
function getImageForMenu(name){
  const file = MENU_IMAGES[name];
  if(file){
    // ë¡œì»¬ íŒŒì¼ ê²½ë¡œ
    const localPath = `images/${file}`;
    // ë¸Œë¼ìš°ì €ê°€ íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ img íƒœê·¸ì—ì„œ onerrorë¡œ ì²˜ë¦¬.
    return localPath;
  }
  // fallback seed with slug
  const slug = name.toLowerCase().replace(/[^\w]+/g,'-').replace(/^-+|-+$/g,'');
  return `https://picsum.photos/seed/${encodeURIComponent(slug)}/400/300`;
}

/* ---------- 5) UI ì´ˆê¸°í™”, ì˜µì…˜ ë²„íŠ¼ ìƒì„± ---------- */
const optTime = el('opt-time'), optStyle = el('opt-style'), optSpicy = el('opt-spicy');
const selected = { time:null, style:null, spicy:null };

function makeOptionButtons(container, arr, key){
  container.innerHTML = '';
  arr.forEach(v=>{
    const b = document.createElement('button');
    b.className = 'choice';
    b.textContent = v;
    b.dataset.value = v;
    b.onclick = ()=>{
      selected[key] = v;
      setActiveOption(container.id, v);
      updateSelectedInfo();
      // ìë™ìœ¼ë¡œ ë‹¤ìŒ stepìœ¼ë¡œ í¬ì»¤ìŠ¤: if key is time->focus style; if style->spicy; if spicy->show results
      if(key==='time') document.querySelector('#opt-style .choice')?.focus();
      if(key==='style') document.querySelector('#opt-spicy .choice')?.focus();
      if(selected.time && selected.style && selected.spicy){
        renderResults();
      }
    };
    container.appendChild(b);
  });
}

makeOptionButtons(optTime, TIMES, 'time');
makeOptionButtons(optStyle, STYLES, 'style');
makeOptionButtons(optSpicy, SPICIES, 'spicy');

function updateSelectedInfo(){
  const info = `${selected.time || 'â€”'} Â· ${selected.style || 'â€”'} Â· ${selected.spicy || 'â€”'}`;
  el('selected-info').textContent = `ì„ íƒ: ${info}`;
}

/* ---------- 6) ê²°ê³¼ ë Œë”ë§ ---------- */
function renderResults(showAll=false){
  if(!(selected.time && selected.style && selected.spicy)){
    // ì•„ì§ ì„ íƒ ì•ˆ ë¨
    return;
  }
  const key = `${selected.time}-${selected.style}-${selected.spicy}`;
  const pool = MENU_POOL[key] || [];
  // poolì´ ì—†ìœ¼ë©´ fallback ì „ì²´ poolìœ¼ë¡œ ë½‘ê¸°
  let choices = pool.length ? [...pool] : Object.values(MENU_POOL).flat();

  // ìˆœì„œë¥¼ ì„ìŒ
  choices = choices.sort(()=>Math.random()-0.5);

  // ê¸°ë³¸: 6ê°œ ì¶”ì²œ (ëª¨ë°”ì¼ì´ë¼ë©´ ì ê²Œ)
  const count = showAll ? choices.length : Math.min(6, choices.length);
  const pick = choices.slice(0,count);

  // ì¶œë ¥
  const cards = el('cards');
  cards.innerHTML = '';
  pick.forEach(name=>{
    const card = document.createElement('div');
    card.className = 'card';

    const thumb = document.createElement('div'); thumb.className='thumb';
    const img = document.createElement('img');
    img.alt = name;
    img.src = getImageForMenu(name);
    // ë§Œì•½ ë¡œì»¬ ì´ë¯¸ì§€ê°€ ì—†ìœ¼ë©´ onerrorë¡œ ëŒ€ì²´ picsum ì´ë¯¸ì§€ ì„¸íŒ…
    img.onerror = function(){
      this.onerror = null;
      const slug = name.toLowerCase().replace(/[^\w]+/g,'-').replace(/^-+|-+$/g,'');
      this.src = `https://picsum.photos/seed/${encodeURIComponent(slug)}/400/300`;
    };
    thumb.appendChild(img);

    const meta = document.createElement('div'); meta.className='meta';
    const title = document.createElement('div'); title.className='title'; title.textContent = name;
    const sub = document.createElement('div'); sub.className='sub';
    sub.textContent = `${selected.time} Â· ${selected.style} Â· ${selected.spicy}`;

    meta.appendChild(title); meta.appendChild(sub);

    card.appendChild(thumb); card.appendChild(meta);
    cards.appendChild(card);
  });
}

/* ---------- 7) ë²„íŠ¼ ê¸°ëŠ¥ ---------- */
el('btn-reset').onclick = ()=>{
  selected.time = selected.style = selected.spicy = null;
  Array.from(document.querySelectorAll('.choice')).forEach(b=>b.classList.remove('active'));
  updateSelectedInfo();
  el('cards').innerHTML = '';
};

el('btn-random').onclick = ()=>{
  // ëœë¤ìœ¼ë¡œ ê° ì„ íƒ í•˜ë‚˜ì”©
  selected.time = TIMES[Math.floor(Math.random()*TIMES.length)];
  selected.style = STYLES[Math.floor(Math.random()*STYLES.length)];
  selected.spicy = SPICIES[Math.floor(Math.random()*SPICIES.length)];
  setActiveOption('opt-time', selected.time);
  setActiveOption('opt-style', selected.style);
  setActiveOption('opt-spicy', selected.spicy);
  updateSelectedInfo();
  renderResults();
};

el('btn-copy').onclick = ()=>{
  // copy currently displayed menu names
  const cards = Array.from(document.querySelectorAll('.card .title')).map(d=>d.textContent);
  if(cards.length===0){ alert('ë¨¼ì € ì¶”ì²œì„ ë°›ì•„ì£¼ì„¸ìš”.'); return; }
  navigator.clipboard.writeText(cards.join(', ')).then(()=>alert('ë©”ë‰´ ë¦¬ìŠ¤íŠ¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.'));
};

el('btn-export').onclick = ()=>{
  // JSON export of current selection & picks
  const cards = Array.from(document.querySelectorAll('.card .title')).map(d=>d.textContent);
  const payload = { selected: {...selected}, picks: cards, timestamp: new Date().toISOString() };
  const blob = new Blob([JSON.stringify(payload, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = `menu-recommend-${Date.now()}.json`;
  a.click();
  URL.revokeObjectURL(url);
};

el('btn-showall').onclick = ()=>{
  renderResults(true);
};

/* ---------- 8) ì´ˆê¸°í™” ---------- */
updateSelectedInfo();
</script>
</body>
</html>
